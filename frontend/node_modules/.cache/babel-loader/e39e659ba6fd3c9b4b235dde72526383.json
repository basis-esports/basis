{"ast":null,"code":"import _regeneratorRuntime from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/user/basis/frontend/src/components/PostCard/PostCard.js\";\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-bottom: 5px;\\n  border-top: 1px solid \", \";\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 0;\\n  padding-left: 4px;\\n  font-size: \", \";\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 0 \", \";\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: center;\\n  border-top: 1px solid \", \";\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-bottom: \", \";\\n  font-size: \", \";\\n  color: \", \";\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 0 \", \";\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: block;\\n  width: 100%;\\n  max-height: 700px;\\n  object-fit: cover;\\n  cursor: pointer;\\n  margin-bottom: \", \";\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  font-weight: \", \";\\n  color: \", \";\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  color: \", \";\\n  border-bottom: 1px solid \", \";\\n  border: 0;\\n  margin-top: 2px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  padding: \", \" \", \";\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  border-radius: \", \";\\n  padding-bottom: \", \";\\n  background-color: \", \";\\n  border: 1px solid \", \";\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { generatePath } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useApolloClient } from '@apollo/client';\nimport Comment from 'components/Comment';\nimport CreateComment from 'components/CreateComment';\nimport Like from 'components/Like';\nimport { DotsIcon, PostCommentIcon } from 'components/icons';\nimport { Spacing } from 'components/Layout';\nimport { A, H3 } from 'components/Text';\nimport { Button } from 'components/Form';\nimport PostCardOption from 'components/PostCard/PostCardOption';\nimport Modal from 'components/Modal';\nimport Avatar from 'components/Avatar';\nimport { GET_FOLLOWED_POSTS, DELETE_POST } from 'graphql/post';\nimport { GET_AUTH_USER } from 'graphql/user';\nimport { GET_USER_POSTS } from 'graphql/user';\nimport { HOME_PAGE_POSTS_LIMIT, PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\nimport { useStore } from 'store';\nimport * as Routes from 'routes';\nimport { timeAgo } from 'utils/date';\nvar Root = styled.div(_templateObject(), function (p) {\n  return p.theme.radius.sm;\n}, function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.border.main;\n});\nvar TopRow = styled.div(_templateObject2(), function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.spacing.sm;\n});\nvar CreatedAt = styled.div(_templateObject3(), function (p) {\n  return p.theme.font.size.xxs;\n}, function (p) {\n  return p.theme.colors.text.hint;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n});\nvar Author = styled(A)(_templateObject4());\nvar Name = styled.span(_templateObject5(), function (p) {\n  return p.theme.font.size.xs;\n}, function (p) {\n  return p.theme.font.weight.bold;\n}, function (p) {\n  return p.theme.colors.primary.main;\n});\nvar Poster = styled.img(_templateObject6(), function (p) {\n  return p.theme.spacing.sm;\n});\nvar BottomRow = styled.div(_templateObject7());\nvar CountAndIcons = styled.div(_templateObject8(), function (p) {\n  return p.theme.spacing.sm;\n});\nvar Count = styled.div(_templateObject9(), function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.font.size.xs;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n});\nvar Icons = styled.div(_templateObject10(), function (p) {\n  return p.theme.colors.border.main;\n});\nvar Comments = styled.div(_templateObject11(), function (p) {\n  return p.theme.spacing.sm;\n});\nvar StyledButton = styled(Button)(_templateObject12(), function (p) {\n  return p.theme.font.size.xxs;\n});\nvar CommentLine = styled.div(_templateObject13(), function (p) {\n  return p.theme.colors.border.main;\n});\n/**\n * Component for rendering user post\n */\n\nvar PostCard = function PostCard(_ref) {\n  var author = _ref.author,\n      imagePublicId = _ref.imagePublicId,\n      comments = _ref.comments,\n      title = _ref.title,\n      createdAt = _ref.createdAt,\n      image = _ref.image,\n      likes = _ref.likes,\n      postId = _ref.postId,\n      openModal = _ref.openModal;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var client = useApolloClient();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isCommentOpen = _useState2[0],\n      setIsCommentOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOptionOpen = _useState4[0],\n      setIsOptionOpen = _useState4[1];\n\n  var toggleCreateComment = function toggleCreateComment() {\n    setIsCommentOpen(true);\n  };\n\n  var toggleComment = function toggleComment() {\n    setIsCommentOpen(!isCommentOpen);\n  };\n\n  var closeOption = function closeOption() {\n    return setIsOptionOpen(false);\n  };\n\n  var openOption = function openOption() {\n    return setIsOptionOpen(true);\n  };\n\n  var deletePost = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return client.mutate({\n                mutation: DELETE_POST,\n                variables: {\n                  input: {\n                    id: postId,\n                    imagePublicId\n                  }\n                },\n                refetchQueries: function refetchQueries() {\n                  return [{\n                    query: GET_FOLLOWED_POSTS,\n                    variables: {\n                      userId: auth.user.id,\n                      skip: 0,\n                      limit: HOME_PAGE_POSTS_LIMIT\n                    }\n                  }, {\n                    query: GET_AUTH_USER\n                  }, {\n                    query: GET_USER_POSTS,\n                    variables: {\n                      username: auth.user.username,\n                      skip: 0,\n                      limit: PROFILE_PAGE_POSTS_LIMIT\n                    }\n                  }];\n                }\n              });\n\n            case 3:\n              _context.next = 7;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 7:\n              setIsOptionOpen(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n\n    return function deletePost() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Root, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    onClose: closeOption,\n    open: isOptionOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PostCardOption, {\n    postId: postId,\n    closeOption: closeOption,\n    author: author,\n    deletePost: deletePost,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TopRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Author, {\n    to: generatePath(Routes.USER_PROFILE, {\n      username: author.username\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: author.image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Spacing, {\n    left: \"xs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Name, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, author.fullName), /*#__PURE__*/React.createElement(CreatedAt, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, timeAgo(createdAt)))), /*#__PURE__*/React.createElement(Button, {\n    ghost: true,\n    onClick: openOption,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DotsIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Spacing, {\n    left: \"sm\",\n    bottom: \"sm\",\n    top: \"xs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(H3, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  }, title)), image && /*#__PURE__*/React.createElement(Poster, {\n    src: image,\n    onClick: openModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(BottomRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CountAndIcons, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Count, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, likes.length, \" likes\", /*#__PURE__*/React.createElement(Spacing, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: toggleComment,\n    text: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, comments.length, \" comments\")), /*#__PURE__*/React.createElement(Icons, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Like, {\n    fullWidth: true,\n    withText: true,\n    user: author,\n    postId: postId,\n    likes: likes,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    text: true,\n    onClick: toggleCreateComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(PostCommentIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }), \" \", /*#__PURE__*/React.createElement(Spacing, {\n    inline: true,\n    left: \"xxs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 37\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 67\n    }\n  }, \"Comment\")))), isCommentOpen && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Spacing, {\n    top: \"xs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CommentLine, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(CreateComment, {\n    post: {\n      id: postId,\n      author\n    },\n    focus: isCommentOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  })), comments.length > 0 && /*#__PURE__*/React.createElement(CommentLine, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 39\n    }\n  }), /*#__PURE__*/React.createElement(Comments, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(Comment, {\n      key: comment.id,\n      comment: comment,\n      postId: postId,\n      postAuthor: author,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 19\n      }\n    });\n  }))))));\n};\n\nPostCard.propTypes = {\n  author: PropTypes.object.isRequired,\n  imagePublicId: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  likes: PropTypes.array.isRequired,\n  comments: PropTypes.array,\n  createdAt: PropTypes.string.isRequired,\n  postId: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired\n};\nexport default PostCard;","map":{"version":3,"sources":["/Users/user/basis/frontend/src/components/PostCard/PostCard.js"],"names":["React","useState","PropTypes","generatePath","styled","useApolloClient","Comment","CreateComment","Like","DotsIcon","PostCommentIcon","Spacing","A","H3","Button","PostCardOption","Modal","Avatar","GET_FOLLOWED_POSTS","DELETE_POST","GET_AUTH_USER","GET_USER_POSTS","HOME_PAGE_POSTS_LIMIT","PROFILE_PAGE_POSTS_LIMIT","useStore","Routes","timeAgo","Root","div","p","theme","radius","sm","spacing","xs","colors","white","border","main","TopRow","CreatedAt","font","size","xxs","text","hint","secondary","Author","Name","span","weight","bold","primary","Poster","img","BottomRow","CountAndIcons","Count","Icons","Comments","StyledButton","CommentLine","PostCard","author","imagePublicId","comments","title","createdAt","image","likes","postId","openModal","auth","client","isCommentOpen","setIsCommentOpen","isOptionOpen","setIsOptionOpen","toggleCreateComment","toggleComment","closeOption","openOption","deletePost","mutate","mutation","variables","input","id","refetchQueries","query","userId","user","skip","limit","username","USER_PROFILE","fullName","length","map","comment","propTypes","object","isRequired","string","array","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { generatePath } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useApolloClient } from '@apollo/client';\n\nimport Comment from 'components/Comment';\nimport CreateComment from 'components/CreateComment';\nimport Like from 'components/Like';\nimport { DotsIcon, PostCommentIcon } from 'components/icons';\nimport { Spacing } from 'components/Layout';\nimport { A, H3 } from 'components/Text';\nimport { Button } from 'components/Form';\nimport PostCardOption from 'components/PostCard/PostCardOption';\nimport Modal from 'components/Modal';\nimport Avatar from 'components/Avatar';\n\nimport { GET_FOLLOWED_POSTS, DELETE_POST } from 'graphql/post';\nimport { GET_AUTH_USER } from 'graphql/user';\nimport { GET_USER_POSTS } from 'graphql/user';\n\nimport { HOME_PAGE_POSTS_LIMIT, PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\n\nimport { useStore } from 'store';\n\nimport * as Routes from 'routes';\n\nimport { timeAgo } from 'utils/date';\n\nconst Root = styled.div`\n  width: 100%;\n  border-radius: ${(p) => p.theme.radius.sm};\n  padding-bottom: ${(p) => p.theme.spacing.xs};\n  background-color: ${(p) => p.theme.colors.white};\n  border: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\nconst TopRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: ${(p) => p.theme.spacing.xs} ${(p) => p.theme.spacing.sm};\n`;\n\nconst CreatedAt = styled.div`\n  font-size: ${(p) => p.theme.font.size.xxs};\n  color: ${(p) => p.theme.colors.text.hint};\n  border-bottom: 1px solid ${(p) => p.theme.colors.text.secondary};\n  border: 0;\n  margin-top: 2px;\n`;\n\nconst Author = styled(A)`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst Name = styled.span`\n  font-size: ${(p) => p.theme.font.size.xs};\n  font-weight: ${(p) => p.theme.font.weight.bold};\n  color: ${(p) => p.theme.colors.primary.main};\n`;\n\nconst Poster = styled.img`\n  display: block;\n  width: 100%;\n  max-height: 700px;\n  object-fit: cover;\n  cursor: pointer;\n  margin-bottom: ${(p) => p.theme.spacing.sm};\n`;\n\nconst BottomRow = styled.div`\n  overflow: hidden;\n`;\n\nconst CountAndIcons = styled.div`\n  padding: 0 ${(p) => p.theme.spacing.sm};\n`;\n\nconst Count = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: ${(p) => p.theme.spacing.xs};\n  font-size: ${(p) => p.theme.font.size.xs};\n  color: ${(p) => p.theme.colors.text.secondary};\n`;\n\nconst Icons = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  border-top: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\nconst Comments = styled.div`\n  padding: 0 ${(p) => p.theme.spacing.sm};\n`;\n\nconst StyledButton = styled(Button)`\n  padding: 0;\n  padding-left: 4px;\n  font-size: ${(p) => p.theme.font.size.xxs};\n`;\n\nconst CommentLine = styled.div`\n  margin-bottom: 5px;\n  border-top: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\n/**\n * Component for rendering user post\n */\nconst PostCard = ({ author, imagePublicId, comments, title, createdAt, image, likes, postId, openModal }) => {\n  const [{ auth }] = useStore();\n  const client = useApolloClient();\n  const [isCommentOpen, setIsCommentOpen] = useState(false);\n  const [isOptionOpen, setIsOptionOpen] = useState(false);\n\n  const toggleCreateComment = () => {\n    setIsCommentOpen(true);\n  };\n\n  const toggleComment = () => {\n    setIsCommentOpen(!isCommentOpen);\n  };\n\n  const closeOption = () => setIsOptionOpen(false);\n\n  const openOption = () => setIsOptionOpen(true);\n\n  const deletePost = async () => {\n    try {\n      await client.mutate({\n        mutation: DELETE_POST,\n        variables: { input: { id: postId, imagePublicId } },\n        refetchQueries: () => [\n          {\n            query: GET_FOLLOWED_POSTS,\n            variables: {\n              userId: auth.user.id,\n              skip: 0,\n              limit: HOME_PAGE_POSTS_LIMIT,\n            },\n          },\n          { query: GET_AUTH_USER },\n          {\n            query: GET_USER_POSTS,\n            variables: {\n              username: auth.user.username,\n              skip: 0,\n              limit: PROFILE_PAGE_POSTS_LIMIT,\n            },\n          },\n        ],\n      });\n    } catch (err) {}\n\n    setIsOptionOpen(false);\n  };\n\n  return (\n    <>\n      <Root>\n        <Modal onClose={closeOption} open={isOptionOpen}>\n          <PostCardOption postId={postId} closeOption={closeOption} author={author} deletePost={deletePost} />\n        </Modal>\n\n        <TopRow>\n          <Author\n            to={generatePath(Routes.USER_PROFILE, {\n              username: author.username,\n            })}\n          >\n            <Avatar image={author.image} />\n\n            <Spacing left=\"xs\">\n              <Name>{author.fullName}</Name>\n              <CreatedAt>{timeAgo(createdAt)}</CreatedAt>\n            </Spacing>\n          </Author>\n\n          <Button ghost onClick={openOption}>\n            <DotsIcon />\n          </Button>\n        </TopRow>\n\n        <Spacing left=\"sm\" bottom=\"sm\" top=\"xs\">\n          <H3>{title}</H3>\n        </Spacing>\n\n        {image && <Poster src={image} onClick={openModal} />}\n\n        <BottomRow>\n          <CountAndIcons>\n            <Count>\n              {likes.length} likes\n              <Spacing />\n              <StyledButton onClick={toggleComment} text>\n                {comments.length} comments\n              </StyledButton>\n            </Count>\n\n            <Icons>\n              <Like fullWidth withText user={author} postId={postId} likes={likes} />\n\n              <Button fullWidth text onClick={toggleCreateComment}>\n                <PostCommentIcon /> <Spacing inline left=\"xxs\" /> <b>Comment</b>\n              </Button>\n            </Icons>\n          </CountAndIcons>\n\n          {isCommentOpen && (\n            <>\n              <Spacing top=\"xs\">\n                <CommentLine />\n                <CreateComment post={{ id: postId, author }} focus={isCommentOpen} />\n              </Spacing>\n\n              {comments.length > 0 && <CommentLine />}\n\n              <Comments>\n                {comments.map((comment) => (\n                  <Comment key={comment.id} comment={comment} postId={postId} postAuthor={author} />\n                ))}\n              </Comments>\n            </>\n          )}\n        </BottomRow>\n      </Root>\n    </>\n  );\n};\n\nPostCard.propTypes = {\n  author: PropTypes.object.isRequired,\n  imagePublicId: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  likes: PropTypes.array.isRequired,\n  comments: PropTypes.array,\n  createdAt: PropTypes.string.isRequired,\n  postId: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n\nexport default PostCard;\n"]},"metadata":{},"sourceType":"module"}