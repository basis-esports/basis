{"ast":null,"code":"import _slicedToArray from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/user/basis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/user/basis/frontend/src/pages/Messages/MessagesChatHeading.js\";\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  width: 8px;\\n  height: 8px;\\n  background-color: \", \";\\n  margin-left: \", \";\\n  border-radius: 50%;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  color: \", \";\\n  font-weight: \", \";\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  padding-left: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: center;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0 \", \";\\n  padding: \", \" \", \";\\n  border-radius: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  text-decoration: none;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-top: 1px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  padding: 0 \", \";\\n  color: \", \";\\n  font-size: \", \";\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  background-color: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  height: 60px;\\n  border-bottom: 1px solid \", \";\\n  z-index: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { generatePath, withRouter, Link } from 'react-router-dom';\nimport { useSubscription } from '@apollo/client';\nimport Search from 'components/Search';\nimport Avatar from 'components/Avatar';\nimport { IS_USER_ONLINE_SUBSCRIPTION } from 'graphql/user';\nimport * as Routes from 'routes';\nimport { useStore } from 'store';\nvar Root = styled.div(_templateObject(), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.border.main;\n});\nvar InputContainer = styled.div(_templateObject2(), function (p) {\n  return p.theme.spacing.sm;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n}, function (p) {\n  return p.theme.font.size.xs;\n});\nvar To = styled.div(_templateObject3());\nvar User = styled(Link)(_templateObject4(), function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.radius.md;\n});\nvar Info = styled.div(_templateObject5(), function (p) {\n  return p.theme.spacing.xs;\n});\nvar FullName = styled.div(_templateObject6(), function (p) {\n  return p.theme.font.size.sm;\n}, function (p) {\n  return p.theme.colors.text.primary;\n}, function (p) {\n  return p.theme.font.weight.bold;\n});\nvar Online = styled.div(_templateObject7(), function (p) {\n  return p.theme.colors.success;\n}, function (p) {\n  return p.theme.spacing.xs;\n});\n/**\n * Heading component for messages chat\n */\n\nvar MessagesChatHeading = function MessagesChatHeading(_ref) {\n  var location = _ref.location,\n      match = _ref.match,\n      chatUser = _ref.chatUser;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var _useSubscription = useSubscription(IS_USER_ONLINE_SUBSCRIPTION, {\n    variables: {\n      authUserId: auth.user.id,\n      userId: chatUser ? chatUser.id : null\n    },\n    skip: !chatUser\n  }),\n      data = _useSubscription.data,\n      loading = _useSubscription.loading; // Update user's isOnline field in real time\n\n\n  if (!loading && data && chatUser) {\n    chatUser.isOnline = data.isUserOnline.isOnline;\n  }\n\n  if (match.params.userId === Routes.NEW_ID_VALUE || !chatUser) {\n    return /*#__PURE__*/React.createElement(Root, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(InputContainer, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(To, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, \"To:\"), /*#__PURE__*/React.createElement(Search, {\n      location: location,\n      backgroundColor: \"white\",\n      hideIcon: true,\n      forMessage: true,\n      placeholder: \"Type the name of a person\",\n      autoFocus: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  if (chatUser) {\n    return /*#__PURE__*/React.createElement(Root, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(User, {\n      to: generatePath(Routes.USER_PROFILE, {\n        username: chatUser.username\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      image: chatUser.image,\n      size: 40,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Info, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FullName, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, chatUser.fullName), chatUser.isOnline && /*#__PURE__*/React.createElement(Online, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 35\n      }\n    }))));\n  }\n\n  return null;\n};\n\nMessagesChatHeading.propTypes = {\n  match: PropTypes.object.isRequired,\n  chatUser: PropTypes.object\n};\nexport default withRouter(MessagesChatHeading);","map":{"version":3,"sources":["/Users/user/basis/frontend/src/pages/Messages/MessagesChatHeading.js"],"names":["React","styled","PropTypes","generatePath","withRouter","Link","useSubscription","Search","Avatar","IS_USER_ONLINE_SUBSCRIPTION","Routes","useStore","Root","div","p","theme","colors","white","border","main","InputContainer","spacing","sm","text","secondary","font","size","xs","To","User","xxs","radius","md","Info","FullName","primary","weight","bold","Online","success","MessagesChatHeading","location","match","chatUser","auth","variables","authUserId","user","id","userId","skip","data","loading","isOnline","isUserOnline","params","NEW_ID_VALUE","USER_PROFILE","username","image","fullName","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { generatePath, withRouter, Link } from 'react-router-dom';\nimport { useSubscription } from '@apollo/client';\n\nimport Search from 'components/Search';\nimport Avatar from 'components/Avatar';\n\nimport { IS_USER_ONLINE_SUBSCRIPTION } from 'graphql/user';\n\nimport * as Routes from 'routes';\n\nimport { useStore } from 'store';\n\nconst Root = styled.div`\n  position: relative;\n  background-color: ${(p) => p.theme.colors.white};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 60px;\n  border-bottom: 1px solid ${(p) => p.theme.colors.border.main};\n  z-index: 1;\n`;\n\nconst InputContainer = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 ${(p) => p.theme.spacing.sm};\n  color: ${(p) => p.theme.colors.text.secondary};\n  font-size: ${(p) => p.theme.font.size.xs};\n`;\n\nconst To = styled.div`\n  margin-top: 1px;\n`;\n\nconst User = styled(Link)`\n  margin: 0 ${(p) => p.theme.spacing.xxs};\n  padding: ${(p) => p.theme.spacing.xxs} ${(p) => p.theme.spacing.xxs};\n  border-radius: ${(p) => p.theme.radius.md};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-decoration: none;\n`;\n\nconst Info = styled.div`\n  padding-left: ${(p) => p.theme.spacing.xs};\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n`;\n\nconst FullName = styled.div`\n  font-size: ${(p) => p.theme.font.size.sm};\n  color: ${(p) => p.theme.colors.text.primary};\n  font-weight: ${(p) => p.theme.font.weight.bold};\n`;\n\nconst Online = styled.div`\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  background-color: ${(p) => p.theme.colors.success};\n  margin-left: ${(p) => p.theme.spacing.xs};\n  border-radius: 50%;\n`;\n\n/**\n * Heading component for messages chat\n */\nconst MessagesChatHeading = ({ location, match, chatUser }) => {\n  const [{ auth }] = useStore();\n\n  const { data, loading } = useSubscription(IS_USER_ONLINE_SUBSCRIPTION, {\n    variables: {\n      authUserId: auth.user.id,\n      userId: chatUser ? chatUser.id : null,\n    },\n    skip: !chatUser,\n  });\n\n  // Update user's isOnline field in real time\n  if (!loading && data && chatUser) {\n    chatUser.isOnline = data.isUserOnline.isOnline;\n  }\n\n  if (match.params.userId === Routes.NEW_ID_VALUE || !chatUser) {\n    return (\n      <Root>\n        <InputContainer>\n          <To>To:</To>\n          <Search\n            location={location}\n            backgroundColor=\"white\"\n            hideIcon\n            forMessage\n            placeholder=\"Type the name of a person\"\n            autoFocus\n          />\n        </InputContainer>\n      </Root>\n    );\n  }\n\n  if (chatUser) {\n    return (\n      <Root>\n        <User\n          to={generatePath(Routes.USER_PROFILE, {\n            username: chatUser.username,\n          })}\n        >\n          <Avatar image={chatUser.image} size={40} />\n\n          <Info>\n            <FullName>{chatUser.fullName}</FullName>\n\n            {chatUser.isOnline && <Online />}\n          </Info>\n        </User>\n      </Root>\n    );\n  }\n\n  return null;\n};\n\nMessagesChatHeading.propTypes = {\n  match: PropTypes.object.isRequired,\n  chatUser: PropTypes.object,\n};\n\nexport default withRouter(MessagesChatHeading);\n"]},"metadata":{},"sourceType":"module"}